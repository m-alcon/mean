<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Quotes</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/style.css" rel="stylesheet">
    </head>
    <body>
        <div class="quote">
            <ul>
                <li>quote</li>
                <li>character</li>
            </ul>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>
            function animate(quote, data, it) {
                //let ran = Math.floor(Math.random()*data.length)
                $(quote).css({opacity: 0})
                $(quote).animate({opacity: 1}, 500, "linear")
                let ran = it

                let lis = quote.getElementsByTagName("li")
                lis[0].innerHTML = data[ran].text;
                lis[1].innerHTML = data[ran].character.name;
            }

            let quotes = document.getElementsByClassName("quote")
            $.getJSON("./api/quotes", (data,status) => {
                let it = Math.floor(Math.random()*data.length);
                animate(quotes[0],data, it)
                setInterval(() => {
                    it = (it+1) % data.length        
                    animate(quotes[0], data, it)                  
                }, 5000)
            })
            
        </script>
    </body>
</html>